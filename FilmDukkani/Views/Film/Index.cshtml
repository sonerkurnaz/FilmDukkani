@model IEnumerable<Film>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>


</head>
<body>
    @if (User.Identity.IsAuthenticated == true)
    {
         @if (User.IsInRole("admin"))
    {
    <a class="btn btn-primary float-right" asp-action="Create">Film Ekle</a>
    }
        <div class="row">

            @foreach (var item in Model)
            {
                
                    <div class="card col-md-3" style="width: 18rem;">
                        <div class="card-body">
                            <h4 class="card-title">@item.FilmAdi</h4>
                            <h6 class="card-subtitle mb-2 text-muted">@item.YapimYili</h6>
                            <p class="card-text">@item.Aciklama</p>

                            @if (User.IsInRole("admin"))
                            {
                                
                                <td>
                                <a class="btn btn-outline-success float-center"
                           asp-controller="Film"
                           asp-route-id="@item.Id"
                           asp-action="Update">Güncelle</a>
                                </td>
                                <td>
                                <a class="btn btn-outline-danger float-center"
                           asp-controller="Film"
                           asp-route-id="@item.Id"
                           asp-action="Delete">Sil</a>
                                </td>
                                
                            }
                            else
                            {
                            <a asp-action="Details" asp-controller="Film" asp-route-id="@item.Id" class="card-link btn btn-info float-center">Detay</a>
                            <a class="card-link btn btn-danger float-center">Sepete Ekle</a>
                            }


                        </div>
                    </div>
                
            }

        </div>
    }




    @*//---------------------------------*@

    @* <table class="table table-success table-striped-columns">
    <thead>
    <tr>

    <th>Id</th>
    <th>Film Adı</th>
    <th>KategoriId</th>

    <th>Fiyat</th>
    <th>Yönetmen</th>
    <th>Yapım</th>
    <th>Detay</th>

    @if (User.IsInRole("admin"))
    {
    <th>Güncelle</th>
    <th>Sil</th>
    }



    </tr>
    </thead>
    <tbody>
    @foreach (var item in Model)
    {
    <tr>
    <td>@item.Id</td>
    <td>@item.FilmAdi</td>
    <td>@item.FilmKategorileri</td>

    <td>@item.Fiyat</td>
    <td>@item.Yonetmeni</td>
    <td>@item.YapimYili</td>

    @*<td>
    @{
    byte[]? photo;
    string imgSrc = null;
    if (item.Fotograflar.Count > 0)
    {
    foreach (var resim in item.Fotograflar)
    {
    photo = resim.Foto;
    if (photo != null)
    {
    MemoryStream ms = new();
    ms.Write(photo, 78, photo.Length - 78);
    var base64 = Convert.ToBase64String(ms.ToArray());
    imgSrc = String.Format("data:image/gif;base64,{0}", base64);
    }
    }
    }
    }
    <img src="@imgSrc" class="img-tumbnail" />
    </td>*@
    @* <td>
    <a class="btn btn-outline-primary"
    asp-controller="Film"
    asp-route-id="@item.Id"
    asp-action="Details">Detay</a>
    </td>*@

    @*</tr>
    }
    </tbody>
    </table>
    @* @if (User.IsInRole("admin"))
    {
    <a class="btn btn-primary float-right" asp-action="Create">Film Ekle</a>
    }*@

</body>
</html>
